<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tourgether 소스코드 다운로드</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .download-section {
            border: 2px dashed #007bff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }
        .download-btn {
            background-color: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
        }
        .download-btn:hover {
            background-color: #0056b3;
        }
        .info {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .file-list {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Tourgether 소스코드 다운로드</h1>
        
        <div class="info">
            <h3>📦 백업 정보</h3>
            <p><strong>생성일:</strong> <span id="backup-date"></span></p>
            <p><strong>프로젝트:</strong> Tourgether - 여행 경험 공유 플랫폼</p>
            <p><strong>상태:</strong> 파일 업로드/저장 시스템 완전 구현 완료</p>
        </div>

        <div class="download-section">
            <h3>💾 소스코드 다운로드</h3>
            <p>전체 소스코드가 압축되어 준비되었습니다.</p>
            <div id="download-links"></div>
        </div>

        <div class="info">
            <h3>📋 포함된 주요 기능</h3>
            <ul>
                <li>✅ Google Maps API 통합 (인터랙티브 지도)</li>
                <li>✅ 실시간 파일 업로드/저장 시스템 (이미지/동영상)</li>
                <li>✅ PostgreSQL 데이터베이스 연동</li>
                <li>✅ React + TypeScript 프론트엔드</li>
                <li>✅ Express.js 백엔드 API</li>
                <li>✅ POI 필터링 및 지도 마커 시스템</li>
                <li>✅ 사용자 인증 및 세션 관리</li>
                <li>✅ 반응형 모바일 디자인</li>
            </ul>
        </div>

        <div class="file-list">
            <h4>주요 파일 구조:</h4>
            <pre>
├── client/                 # React 프론트엔드
│   ├── src/
│   │   ├── components/    # UI 컴포넌트
│   │   ├── pages/         # 페이지 컴포넌트
│   │   └── lib/           # 유틸리티
├── server/                # Express 백엔드
│   ├── routes.ts          # API 라우트
│   ├── db.ts             # 데이터베이스
│   └── index.ts          # 서버 진입점
├── shared/               # 공유 타입/스키마
│   └── schema.ts
├── uploads/              # 업로드된 파일들
├── package.json          # 의존성
└── README.md            # 문서
            </pre>
        </div>

        <div class="info">
            <h3>🔧 로컬 개발 환경 설정</h3>
            <ol>
                <li>압축 파일을 다운로드하고 압축 해제</li>
                <li><code>npm install</code> 실행</li>
                <li><code>.env</code> 파일에 환경변수 설정:
                    <ul>
                        <li>DATABASE_URL (PostgreSQL)</li>
                        <li>VITE_GOOGLE_MAPS_API_KEY</li>
                    </ul>
                </li>
                <li><code>npm run dev</code>로 개발 서버 시작</li>
            </ol>
        </div>
    </div>

    <script>
        // 현재 날짜 표시
        document.getElementById('backup-date').textContent = new Date().toLocaleString('ko-KR');
        
        // 백업 파일 목록 가져오기
        fetch('/api/backup-files')
            .then(response => response.json())
            .then(files => {
                const linksContainer = document.getElementById('download-links');
                files.forEach(file => {
                    const link = document.createElement('a');
                    link.href = `/${file.name}`;
                    link.className = 'download-btn';
                    link.download = file.name;
                    link.textContent = `📥 ${file.name} (${(file.size / 1024 / 1024).toFixed(1)}MB)`;
                    linksContainer.appendChild(link);
                });
            })
            .catch(error => {
                console.error('백업 파일 목록 로드 실패:', error);
                document.getElementById('download-links').innerHTML = 
                    '<p style="color: red;">백업 파일 목록을 불러올 수 없습니다.</p>';
            });
    </script>
</body>
</html>