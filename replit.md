# Tourgether - ì—¬í–‰ ê³µìœ ê²½ì œ SNS í”Œë«í¼

## Overview
TourgetherëŠ” ì—¬í–‰ê³¼ ë§Œë‚¨ì„ ì£¼ì œë¡œ í•œ **í”¼ë“œ ê¸°ë°˜ SNS**ì´ì **ê³µìœ ê²½ì œ í”Œë«í¼**ì…ë‹ˆë‹¤. 

**í•µì‹¬ ì •ì²´ì„±:**
- ğŸ¯ **SNSê°€ í•µì‹¬** - ì´ì»¤ë¨¸ìŠ¤ê°€ ì•„ë‹˜, ëª¨ë“  ê²ƒì€ í”¼ë“œì—ì„œ ì‹œì‘
- ğŸ”„ **ì–‘ë°©í–¥ ê³µìœ ê²½ì œ** - ì—¬í–‰ìë„, ë¡œì»¬ê°€ì´ë“œë„ ëˆ„êµ¬ë‚˜ ëˆì„ ë²Œ ìˆ˜ ìˆìŒ
- ğŸ—ºï¸ **ì§€ë„ ì¤‘ì‹¬ ë°œê²¬** - ì‚¬ëŒ, ì¥ì†Œ, ì´ë²¤íŠ¸ë¥¼ ì§€ë„ì—ì„œ íƒìƒ‰
- ğŸ’¬ **DMìœ¼ë¡œ ë§Œë‚¨ ì—°ê²°** - ì˜¨ë¼ì¸ì—ì„œ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì´ì–´ì§
- ğŸ”’ **ì•ˆì „í•œ ê³„ì•½ êµ¬ì¡°** - P2P ê±°ë˜ì˜ ì‹ ë¢°ì™€ ë³´í˜¸

**ê³µìœ ê²½ì œ í”Œë¡œìš°:**
1. ì—¬í–‰ìê°€ "ì´ëŸ° ì—¬í–‰ í•˜ê³ ì‹¶ì–´ìš”" ìš”êµ¬ì‚¬í•­ì„ í”¼ë“œì— ë“±ë¡
2. ë¡œì»¬ê°€ì´ë“œê°€ ë§ì¶¤ í”Œëœì„ ì œì•ˆ
3. DMì—ì„œ í˜‘ì˜ â†’ ì•ˆì „í•œ ê³„ì•½ ì²´ê²° (ì—ìŠ¤í¬ë¡œ)
4. ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ì„œë¹„ìŠ¤ ì œê³µ â†’ ì •ì‚°

**ëˆ„êµ¬ë‚˜ ëˆì„ ë²Œ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤:**
- ì˜¨ë¼ì¸: ì˜ˆì•½ëŒ€í–‰, ì •ë³´ì œê³µ, ê°€ì´ë“œ, í†µì—­
- ì˜¤í”„ë¼ì¸: ì°¨ëŸ‰, ìˆ™ë°•, ì–´ë“œë²¤ì²˜, ì‡¼í•‘ëŒ€í–‰
- ì´ë²¤íŠ¸ ì£¼ìµœ/ì°¸ì—¬
- ì…€í”„ ë³´ë”°ë¦¬ìƒ (êµ¬ë§¤ëŒ€í–‰)

## User Preferences
Preferred communication style: Simple, everyday language.

---

## ğŸš¨ ê°œë°œ í•µì‹¬ ì›ì¹™ (ëª¨ë“  ê°œë°œì í•„ë…!)

### ì›ì¹™ 1: SNS ì •ì²´ì„± ìœ ì§€ (ì ˆëŒ€ ì´ì»¤ë¨¸ìŠ¤ ì•„ë‹˜!)

> **í˜„ì¬ ì•±ì˜ "ë†€ì´í„° ê°™ì€ SNS" ë¶„ìœ„ê¸°ë¥¼ ì ˆëŒ€ ìƒì§€ ë§ˆì„¸ìš”!**

| âœ… DO | âŒ DON'T |
|-------|----------|
| í”¼ë“œì—ì„œ ì—¬í–‰ ìŠ¤í† ë¦¬ ê³µìœ  | ìƒí’ˆ ë¦¬ìŠ¤íŒ… í˜ì´ì§€ |
| DMìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ í˜‘ì˜ | ì¥ë°”êµ¬ë‹ˆ, ê²°ì œ ë²„íŠ¼ |
| ì§€ë„ì—ì„œ ì‚¬ëŒ/ì¥ì†Œ ë°œê²¬ | ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ëª©ë¡ |
| í”„ë¡œí•„ë¡œ ì—°ê²°ë˜ëŠ” ê´€ê³„ | íŒë§¤ì-êµ¬ë§¤ì ë¶„ë¦¬ |

**ì²´í¬ë¦¬ìŠ¤íŠ¸ (ëª¨ë“  ê¸°ëŠ¥ ê°œë°œ ì‹œ):**
- [ ] ì´ ê¸°ëŠ¥ì´ í”¼ë“œ/DM/ì§€ë„ì—ì„œ ì‹œì‘ë˜ëŠ”ê°€?
- [ ] ì‚¬ìš©ìê°€ "ì‡¼í•‘ëª°ì— ì˜¨ ê²ƒ ê°™ë‹¤"ê³  ëŠë‚„ ìˆ˜ ìˆëŠ”ê°€?
- [ ] ìš©ì–´ê°€ "ìƒí’ˆ/êµ¬ë§¤/ì£¼ë¬¸"ì´ ì•„ë‹Œ "ì œì•ˆ/ê³„ì•½/ì„œë¹„ìŠ¤"ì¸ê°€?
- [ ] UIê°€ ë†€ì´í„°ì²˜ëŸ¼ ê°€ë³ê³  ì¬ë¯¸ìˆëŠ”ê°€?

### ì›ì¹™ 2: ê¸€ë¡œë²Œ 10ì–µ+ ì‚¬ìš©ì í™•ì¥ì„± (DB ê¸°ë°˜ i18n)

> **ëª¨ë“  ì‚¬ìš©ì ëŒ€ë©´ í…ìŠ¤íŠ¸ëŠ” DB ê¸°ë°˜ìœ¼ë¡œ!**

| âœ… DO | âŒ DON'T |
|-------|----------|
| DB translations í…Œì´ë¸” ì‚¬ìš© | ì½”ë“œì— í•œê¸€/ì˜ì–´ í•˜ë“œì½”ë”© |
| translation key ì‚¬ìš© | ì§ì ‘ ë¬¸ìì—´ ì…ë ¥ |
| ìƒˆ ì–¸ì–´ ì¶”ê°€ = DB insertë§Œ | ìƒˆ ì–¸ì–´ = ì½”ë“œ ìˆ˜ì • í•„ìš” |

**ì²´í¬ë¦¬ìŠ¤íŠ¸ (ëª¨ë“  UI ê°œë°œ ì‹œ):**
- [ ] ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ëª¨ë“  í…ìŠ¤íŠ¸ê°€ t('key') í˜•íƒœì¸ê°€?
- [ ] ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ ì¶”ê°€ ì‹œ translations í…Œì´ë¸”ì— ë“±ë¡í–ˆëŠ”ê°€?
- [ ] 6ê°œ ì–¸ì–´ (en, ko, ja, zh, fr, es) ë²ˆì—­ì„ ëª¨ë‘ ì¶”ê°€í–ˆëŠ”ê°€?

**í˜„ì¬ i18n êµ¬ì¡°:**
- 6ê°œ ì–¸ì–´: en, ko, ja, zh, fr, es
- 5ê°œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤: common, ui, validation, toast, server
- íŒŒì¼ ìœ„ì¹˜: `client/public/locales/{lang}/{namespace}.json`
- DB í™•ì¥: `translations` í…Œì´ë¸” (í•˜ì´ë¸Œë¦¬ë“œ - íŒŒì¼ fallback)

---

## Recent Changes

### Performance Optimization (November 26, 2025)
- **N+1 ì¿¼ë¦¬ ë¬¸ì œ í•´ê²°**: Smart/Popular í”¼ë“œì˜ 200+ ì¿¼ë¦¬ë¥¼ 3ê°œ ë°°ì¹˜ ì¿¼ë¦¬ë¡œ ìµœì í™”
- **ì„±ëŠ¥ í–¥ìƒ**: Smart Feed 4.7ì´ˆ â†’ 0.28ì´ˆ (94% í–¥ìƒ, ëª©í‘œ 40% ì´ˆê³¼ ë‹¬ì„±)
- **ìƒˆ ì„œë¹„ìŠ¤ ëª¨ë“ˆ**:
  - `server/services/cache.ts`: LRU ìºì‹œ ì„œë¹„ìŠ¤
  - `server/services/feedScoringService.ts`: 7-factor ì ìˆ˜ ê³„ì‚° ì„œë¹„ìŠ¤
  - `client/src/hooks/useFeedController.ts`: í”¼ë“œ ìƒíƒœ ê´€ë¦¬ í›…
- **í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”**: ê°€ìƒí™” ê¸°ë³¸ í™œì„±í™”, ì„ê³„ê°’ 50â†’20 ì¡°ì •
- **ìƒì„¸ ë¬¸ì„œ**: `docs/PERFORMANCE_TEST_PLAN.md` ì°¸ê³ 

### DB-Based POI Filter System (November 26, 2025)
- **í•˜ë“œì½”ë”© ì œê±°**: ê¸°ì¡´ í•˜ë“œì½”ë”©ëœ POI í•„í„°ë¥¼ ì™„ì „í•œ DB ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ìƒˆ DB ìŠ¤í‚¤ë§ˆ**: poi_categories, poi_types, poi_category_translations, poi_type_translations í…Œì´ë¸” ì¶”ê°€
- **ë‹¤êµ­ì–´ ì§€ì›**: 6ê°œ ì–¸ì–´ (en, ko, ja, zh, fr, es) POI ì¹´í…Œê³ ë¦¬/íƒ€ì… ë²ˆì—­ ì§€ì›
- **9ê°œ POI ì¹´í…Œê³ ë¦¬**: food_drink, lodging, culture, shopping, transport, nature, utilities, open_to_meet, serendipity
- **27ê°œ POI íƒ€ì…**: ê° ì¹´í…Œê³ ë¦¬ë³„ ì„¸ë¶€ íƒ€ì… (restaurant, cafe, museum, park ë“±)
- **ê·¸ë£¹í•‘ UI**: 2-level í™•ì¥/ì¶•ì†Œ ê°€ëŠ¥í•œ í•„í„° ì¸í„°í˜ì´ìŠ¤
- **API ì—”ë“œí¬ì¸íŠ¸**: GET /api/poi/categories?lang={lang}, POST /api/poi/seed

### AI Model Configuration Enhancement (November 17, 2025)
- **í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ AI ëª¨ë¸ ì„ íƒ**: ê´€ë¦¬ìê°€ ë¹„ìš© ì ˆê°ì„ ìœ„í•´ AI ëª¨ë¸ì„ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ê°œì„ 
- **ì„œë¹„ìŠ¤ë³„ ê°œë³„ ì„¤ì • ì§€ì›**: CineMap, Mini Concierge, AI Concierge ê°ê° ë‹¤ë¥¸ ëª¨ë¸ ì‚¬ìš© ê°€ëŠ¥
- **ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ**:
  1. ì„œë¹„ìŠ¤ë³„ í™˜ê²½ ë³€ìˆ˜ (ì˜ˆ: `CINEMAP_AI_MODEL`)
  2. ê³µí†µ í™˜ê²½ ë³€ìˆ˜ (`AI_MODEL`)
  3. ê¸°ë³¸ê°’ (`gpt-5.1-chat-latest`)
- **ë¹„ìš© ìµœì í™” ì˜µì…˜**:
  - `AI_MODEL=gpt-5-mini` ì„¤ì • ì‹œ ëª¨ë“  AI ì„œë¹„ìŠ¤ê°€ ì €ë ´í•œ ëª¨ë¸ ì‚¬ìš©
  - ì„œë¹„ìŠ¤ë³„ ì°¨ë“± ì ìš© ê°€ëŠ¥ (CineMapì€ í”„ë¦¬ë¯¸ì—„, ë‚˜ë¨¸ì§€ëŠ” ë¯¸ë‹ˆ ëª¨ë¸)
- **ìƒì„¸ ë¬¸ì„œ**: `docs/AI_MODEL_CONFIGURATION.md` ì°¸ê³ 

### GPT-5.1 Upgrade (November 17, 2025)
- **ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ**: ëª¨ë“  AI ì„œë¹„ìŠ¤ë¥¼ `gpt-4o-mini`ì—ì„œ `gpt-5.1-chat-latest`ë¡œ ì—…ê·¸ë ˆì´ë“œ
- **ì„±ëŠ¥ í–¥ìƒ**: ë” ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”, í–¥ìƒëœ ì¶”ë¡  ëŠ¥ë ¥, 2-3ë°° ë¹ ë¥¸ ì†ë„
- **ë¹„ìš© íš¨ìœ¨**: GPT-5 ëŒ€ë¹„ í† í° ì‚¬ìš©ëŸ‰ 50% ì ˆê°

## System Architecture

### Frontend
- **Framework**: React with TypeScript
- **Routing**: Wouter
- **State Management**: TanStack React Query for server state and caching
- **UI Components**: Radix UI primitives with shadcn/ui
- **Styling**: Tailwind CSS with custom design tokens and mobile-first responsive design
- **Build Tool**: Vite

### Backend
- **Runtime**: Node.js with Express.js
- **Language**: TypeScript with ES modules
- **Authentication**: Replit Auth with OpenID Connect integration, JWT-based email/password authentication
- **Session Management**: Express sessions with PostgreSQL store
- **Real-time Communication**: WebSocket implementation for chat
- **API Design**: RESTful endpoints

### Data Storage
- **Primary Database**: PostgreSQL with Neon serverless hosting
- **ORM**: Drizzle ORM for type-safe operations
- **Schema Management**: Drizzle Kit for migrations
- **Connection Pooling**: Neon serverless connection pooling

### Core Features
- **Authentication System**: Replit Auth and JWT-based email/password, secure session management, automatic user profile creation.
- **SNS Core (í”¼ë“œ ê¸°ë°˜)**: ì—¬í–‰ í¬ìŠ¤íŠ¸ ê³µìœ , ì¢‹ì•„ìš”/ëŒ“ê¸€, ìœ„ì¹˜ íƒœê¹…, íƒ€ì„ë¼ì¸, íŠ¸ë¦½ í”Œë˜ë‹.
- **ê³µìœ ê²½ì œ í”Œë¡œìš°**: ì—¬í–‰ì ìš”êµ¬ì‚¬í•­ ë“±ë¡ â†’ ë¡œì»¬ê°€ì´ë“œ ë§ì¶¤ ì œì•ˆ â†’ DM í˜‘ì˜ â†’ ì•ˆì „ ê³„ì•½(ì—ìŠ¤í¬ë¡œ) â†’ ì •ì‚°.
- **ì„œë¹„ìŠ¤ ì œì•ˆ ì‹œìŠ¤í…œ**: ë¡œì»¬ê°€ì´ë“œì˜ í”Œëœ/ì„œë¹„ìŠ¤ ë“±ë¡, ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜ (íˆ¬ì–´, ìŒì‹, ì•¡í‹°ë¹„í‹°, ì‡¼í•‘ëŒ€í–‰ ë“±).
- **Real-time Communication**: Enhanced 3-panel chat system with threaded messaging, real-time WebSocket updates, heartbeat mechanism, and optimistic UI updates.
- **Mobile Experience**: Progressive Web App (PWA) with responsive design, touch navigation, and real-time responsive behavior.
- **Map Integration**: Custom Google Maps styling, SVG markers, theme-based color coding, interactive info windows, zoom-level responsive clustering, POI filtering, and direct feed creation from map clicks.
- **File Upload System**: Multer-based file uploads (images/videos) with UUID-based naming, static file serving, and database integration.
- **Database Management Tool**: In-app DB admin interface (`/db-admin`) for real-time statistics, grid view data visualization, safe SQL query execution, and CRUD operations.
- **Dual Search Functionality**: Location search using Places API and content search for user-generated posts.
- **Real-time Notification System**: Six notification types with visual indicators and location-aware delivery.
- **AI-Powered Features**:
    - **CineMap**: AI-powered travel video storyboard generation from EXIF-tagged photos, creating cinematic journey narratives using OpenAI GPT-5.1 (gpt-5.1-chat-latest).
    - **Mini Concierge**: Location-based 1-hour activity planner generating 3 structured plan cards with map integration and check-in functionality using OpenAI GPT-5.1 (gpt-5.1-chat-latest).
    - **AI Concierge**: Fully functional AI travel assistant with personalized recommendations based on user profile, nearby experiences, recent posts, and upcoming slots, using OpenAI GPT-5.1 (gpt-5.1-chat-latest).
- **DM Translation**: Direct message translation with Google Translate API integration, caching, and user-selectable preferred languages.
- **Unified Content Display**: Feed page and Nearby panel display both posts and experiences with filter toggles (All/Posts/Experiences).
- **Unified Map Experience**: All map functionality integrated into the home page MapComponent with a collapsible Nearby Experiences panel.
- **SEO Enhancement**: Comprehensive SEO implementation with Open Graph, Twitter Card, canonical URL, and JSON-LD structured data on key pages.
- **Profile Management**: Redesigned profile edit modal with multi-select components for languages and interests, Google Places integration for location, and enhanced server validation.
- **Simplified Onboarding**: Removed userType selection, action-based role system, skippable onboarding, and optional profile setup.

### Security Guidelines
- Environment variables must be used for sensitive data (e.g., `process.env.API_KEY`).
- Replit Secrets should store sensitive data.
- Hardcoding of API keys, passwords, or secrets is strictly prohibited. User approval is required for any hardcoded value.

## External Dependencies

### Core Infrastructure
- **Neon Database**: Serverless PostgreSQL hosting
- **Replit Auth**: Authentication service
- **Google Maps API**: Location services and interactive maps (including Places API)
- **OpenAI API**: For AI-powered features (CineMap, Mini Concierge, AI Concierge)
- **Google Translate API**: For DM translation

### Development Tools
- **Replit Vite Plugin**: Development environment integration
- **Font Awesome**: Icon library
- **Google Fonts**: Typography (Inter font family)

### UI/UX Libraries
- **Radix UI**: Accessible component primitives
- **Tailwind CSS**: Utility-first styling framework
- **Class Variance Authority**: Component variant management